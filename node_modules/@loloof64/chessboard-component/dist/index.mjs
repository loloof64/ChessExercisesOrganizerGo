function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function o(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(e,t){e.appendChild(t)}function l(e,t,n){e.insertBefore(t,n||null)}function c(e){e.parentNode.removeChild(e)}function a(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function u(e){return document.createElement(e)}function f(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function d(e){return document.createTextNode(e)}function p(){return d(" ")}function h(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function g(e){return function(t){return t.preventDefault(),e.call(this,t)}}function m(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function v(e,t,n){t in e?e[t]=n:m(e,t,n)}function k(e,t){t=""+t,e.data!==t&&(e.data=t)}function y(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}let $;function w(e){$=e}function b(){if(!$)throw new Error("Function called outside component initialization");return $}function _(){const e=b();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const o=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);r.slice().forEach(t=>{t.call(e,o)})}}}const C=[],z=[],x=[],L=[],E=Promise.resolve();let A=!1;function M(e){x.push(e)}let P=!1;const S=new Set;function R(){if(!P){P=!0;do{for(let e=0;e<C.length;e+=1){const t=C[e];w(t),I(t.$$)}for(C.length=0;z.length;)z.pop()();for(let e=0;e<x.length;e+=1){const t=x[e];S.has(t)||(S.add(t),t())}x.length=0}while(C.length);for(;L.length;)L.pop()();A=!1,P=!1,S.clear()}}function I(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(M)}}const T=new Set;function q(e,t){-1===e.$$.dirty[0]&&(C.push(e),A||(A=!0,E.then(R)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function F(i,s,l,c,a,u,f=[-1]){const d=$;w(i);const p=s.props||{},h=i.$$={fragment:null,ctx:null,props:u,update:e,not_equal:a,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:f};let g=!1;var m,v;h.ctx=l?l(i,p,(e,t,...n)=>{const r=n.length?n[0]:t;return h.ctx&&a(h.ctx[e],h.ctx[e]=r)&&(h.bound[e]&&h.bound[e](r),g&&q(i,e)),t}):[],h.update(),g=!0,r(h.before_update),h.fragment=!!c&&c(h.ctx),s.target&&(s.hydrate?h.fragment&&h.fragment.l(function(e){return Array.from(e.childNodes)}(s.target)):h.fragment&&h.fragment.c(),s.intro&&((m=i.$$.fragment)&&m.i&&(T.delete(m),m.i(v))),function(e,n,i){const{fragment:s,on_mount:l,on_destroy:c,after_update:a}=e.$$;s&&s.m(n,i),M(()=>{const n=l.map(t).filter(o);c?c.push(...n):r(n),e.$$.on_mount=[]}),a.forEach(M)}(i,s.target,s.anchor),R()),w(d)}let N;function j(t){let n,r;return{c(){n=f("svg"),r=f("path"),this.c=e,m(r,"d","M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "),y(r,"opacity","1"),y(r,"fill","#ffffff"),y(r,"fill-opacity","1"),y(r,"fill-rule","nonzero"),y(r,"stroke","#000000"),y(r,"stroke-width","1.5"),y(r,"stroke-linecap","round"),y(r,"stroke-linejoin","miter"),y(r,"stroke-miterlimit","4"),y(r,"stroke-dasharray","none"),y(r,"stroke-opacity","1\n        "),m(n,"xmlns","http://www.w3.org/2000/svg"),m(n,"version","1.1"),m(n,"width",t[0]),m(n,"height",t[0]),m(n,"viewBox","0 0 45 45")},m(e,t){l(e,n,t),s(n,r)},p(e,[t]){1&t&&m(n,"width",e[0]),1&t&&m(n,"height",e[0])},i:e,o:e,d(e){e&&c(n)}}}function D(e,t,n){let{size:r}=t;return e.$set=e=>{"size"in e&&n(0,r=e.size)},[r]}"function"==typeof HTMLElement&&(N=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}$destroy(){!function(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}});function O(t){let n,r,o,i,a,u;return{c(){n=f("svg"),r=f("g"),o=f("path"),i=f("path"),a=f("path"),u=f("path"),this.c=e,m(o,"d","M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"),y(o,"fill","#ffffff"),y(o,"stroke","#000000 "),m(i,"d","M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"),y(i,"fill","#ffffff"),y(i,"stroke","#000000 "),m(a,"d","M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"),y(a,"fill","#000000"),y(a,"stroke","#000000 "),m(u,"d","M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"),m(u,"transform","matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"),y(u,"fill","#000000"),y(u,"stroke","#000000 "),y(r,"opacity","1"),y(r,"fill","none"),y(r,"fill-opacity","1"),y(r,"fill-rule","evenodd"),y(r,"stroke","#000000"),y(r,"stroke-width","1.5"),y(r,"stroke-linecap","round"),y(r,"stroke-linejoin","round"),y(r,"stroke-miterlimit","4"),y(r,"stroke-dasharray","none"),y(r,"stroke-opacity","1\n    "),m(n,"xmlns","http://www.w3.org/2000/svg"),m(n,"version","1.1"),m(n,"width",t[0]),m(n,"height",t[0]),m(n,"viewBox","0 0 45 45")},m(e,t){l(e,n,t),s(n,r),s(r,o),s(r,i),s(r,a),s(r,u)},p(e,[t]){1&t&&m(n,"width",e[0]),1&t&&m(n,"height",e[0])},i:e,o:e,d(e){e&&c(n)}}}function B(e,t,n){let{size:r}=t;return e.$set=e=>{"size"in e&&n(0,r=e.size)},[r]}customElements.define("chess-white-pawn",class extends N{constructor(e){super(),F(this,{target:this.shadowRoot},D,j,i,{size:0}),e&&(e.target&&l(e.target,this,e.anchor),e.props&&(this.$set(e.props),R()))}static get observedAttributes(){return["size"]}get size(){return this.$$.ctx[0]}set size(e){this.$set({size:e}),R()}});function K(t){let n,r,o,i,a,u,d;return{c(){n=f("svg"),r=f("g"),o=f("g"),i=f("path"),a=f("path"),u=f("path"),d=f("path"),this.c=e,m(i,"d","M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z"),m(a,"d","M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"),m(u,"d","M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"),y(o,"fill","#ffffff"),y(o,"stroke","#000000"),y(o,"stroke-linecap","butt\n        "),m(d,"d","M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"),y(d,"fill","none"),y(d,"stroke","#000000"),y(d,"stroke-linejoin","miter\n        "),y(r,"opacity","1"),y(r,"fill","none"),y(r,"fill-rule","evenodd"),y(r,"fill-opacity","1"),y(r,"stroke","#000000"),y(r,"stroke-width","1.5"),y(r,"stroke-linecap","round"),y(r,"stroke-linejoin","round"),y(r,"stroke-miterlimit","4"),y(r,"stroke-dasharray","none"),y(r,"stroke-opacity","1\n    "),m(n,"xmlns","http://www.w3.org/2000/svg"),m(n,"version","1.1"),m(n,"width",t[0]),m(n,"height",t[0]),m(n,"viewBox","0 0 45 45")},m(e,t){l(e,n,t),s(n,r),s(r,o),s(o,i),s(o,a),s(o,u),s(r,d)},p(e,[t]){1&t&&m(n,"width",e[0]),1&t&&m(n,"height",e[0])},i:e,o:e,d(e){e&&c(n)}}}function Q(e,t,n){let{size:r}=t;return e.$set=e=>{"size"in e&&n(0,r=e.size)},[r]}customElements.define("chess-white-knight",class extends N{constructor(e){super(),F(this,{target:this.shadowRoot},B,O,i,{size:0}),e&&(e.target&&l(e.target,this,e.anchor),e.props&&(this.$set(e.props),R()))}static get observedAttributes(){return["size"]}get size(){return this.$$.ctx[0]}set size(e){this.$set({size:e}),R()}});function U(t){let n,r,o,i,a,u,d,p,h;return{c(){n=f("svg"),r=f("g"),o=f("path"),i=f("path"),a=f("path"),u=f("path"),d=f("path"),p=f("path"),h=f("path"),this.c=e,m(o,"d","M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "),y(o,"stroke-linecap","butt\n        "),m(i,"d","M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "),y(i,"stroke-linecap","butt\n        "),m(a,"d","M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14"),y(a,"stroke-linecap","butt\n        "),m(u,"d","M 34,14 L 31,17 L 14,17 L 11,14"),m(d,"d","M 31,17 L 31,29.5 L 14,29.5 L 14,17"),y(d,"stroke-linecap","butt"),y(d,"stroke-linejoin","miter\n        "),m(p,"d","M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5"),m(h,"d","M 11,14 L 34,14"),y(h,"fill","none"),y(h,"stroke","#000000"),y(h,"stroke-linejoin","miter\n        "),y(r,"opacity","1"),y(r,"fill","#ffffff"),y(r,"fill-opacity","1"),y(r,"fill-rule","evenodd"),y(r,"stroke","#000000"),y(r,"stroke-width","1.5"),y(r,"stroke-linecap","round"),y(r,"stroke-linejoin","round"),y(r,"stroke-miterlimit","4"),y(r,"stroke-dasharray","none"),y(r,"stroke-opacity","1\n    "),m(n,"xmlns","http://www.w3.org/2000/svg"),m(n,"version","1.1"),m(n,"width",t[0]),m(n,"height",t[0]),m(n,"viewBox","0 0 45 45")},m(e,t){l(e,n,t),s(n,r),s(r,o),s(r,i),s(r,a),s(r,u),s(r,d),s(r,p),s(r,h)},p(e,[t]){1&t&&m(n,"width",e[0]),1&t&&m(n,"height",e[0])},i:e,o:e,d(e){e&&c(n)}}}function G(e,t,n){let{size:r}=t;return e.$set=e=>{"size"in e&&n(0,r=e.size)},[r]}customElements.define("chess-white-bishop",class extends N{constructor(e){super(),F(this,{target:this.shadowRoot},Q,K,i,{size:0}),e&&(e.target&&l(e.target,this,e.anchor),e.props&&(this.$set(e.props),R()))}static get observedAttributes(){return["size"]}get size(){return this.$$.ctx[0]}set size(e){this.$set({size:e}),R()}});function W(t){let n,r,o,i,a,u,d,p,h,g,v;return{c(){n=f("svg"),r=f("g"),o=f("path"),i=f("path"),a=f("path"),u=f("path"),d=f("path"),p=f("path"),h=f("path"),g=f("path"),v=f("path"),this.c=e,m(o,"d","M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"),m(o,"transform","translate(-1,-1)"),m(i,"d","M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"),m(i,"transform","translate(15.5,-5.5)"),m(a,"d","M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"),m(a,"transform","translate(32,-1)"),m(u,"d","M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"),m(u,"transform","translate(7,-4.5)"),m(d,"d","M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"),m(d,"transform","translate(24,-4)"),m(p,"d","M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z "),y(p,"stroke-linecap","butt "),m(h,"d","M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z "),y(h,"stroke-linecap","butt "),m(g,"d","M 11.5,30 C 15,29 30,29 33.5,30"),y(g,"fill","none "),m(v,"d","M 12,33.5 C 18,32.5 27,32.5 33,33.5"),y(v,"fill","none "),y(r,"opacity","1"),y(r,"fill","#ffffff"),y(r,"fill-opacity","1"),y(r,"fill-rule","evenodd"),y(r,"stroke","#000000"),y(r,"stroke-width","1.5"),y(r,"stroke-linecap","round"),y(r,"stroke-linejoin","round"),y(r,"stroke-miterlimit","4"),y(r,"stroke-dasharray","none"),y(r,"stroke-opacity","1\n    "),m(n,"xmlns","http://www.w3.org/2000/svg"),m(n,"version","1.1"),m(n,"width",t[0]),m(n,"height",t[0]),m(n,"viewBox","0 0 45 45")},m(e,t){l(e,n,t),s(n,r),s(r,o),s(r,i),s(r,a),s(r,u),s(r,d),s(r,p),s(r,h),s(r,g),s(r,v)},p(e,[t]){1&t&&m(n,"width",e[0]),1&t&&m(n,"height",e[0])},i:e,o:e,d(e){e&&c(n)}}}function H(e,t,n){let{size:r}=t;return e.$set=e=>{"size"in e&&n(0,r=e.size)},[r]}customElements.define("chess-white-rook",class extends N{constructor(e){super(),F(this,{target:this.shadowRoot},G,U,i,{size:0}),e&&(e.target&&l(e.target,this,e.anchor),e.props&&(this.$set(e.props),R()))}static get observedAttributes(){return["size"]}get size(){return this.$$.ctx[0]}set size(e){this.$set({size:e}),R()}});function Z(t){let n,r,o,i,a,u,d,p,h;return{c(){n=f("svg"),r=f("g"),o=f("path"),i=f("path"),a=f("path"),u=f("path"),d=f("path"),p=f("path"),h=f("path"),this.c=e,m(o,"d","M 22.5,11.63 L 22.5,6"),y(o,"fill","none"),y(o,"stroke","#000000"),y(o,"stroke-linejoin","miter "),m(i,"d","M 20,8 L 25,8"),y(i,"fill","none"),y(i,"stroke","#000000"),y(i,"stroke-linejoin","miter "),m(a,"d","M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"),y(a,"fill","#ffffff"),y(a,"stroke","#000000"),y(a,"stroke-linecap","butt"),y(a,"stroke-linejoin","miter\n        "),m(u,"d","M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "),y(u,"fill","#ffffff"),y(u,"stroke","#000000 "),m(d,"d","M 11.5,30 C 17,27 27,27 32.5,30"),y(d,"fill","none"),y(d,"stroke","#000000 "),m(p,"d","M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5"),y(p,"fill","none"),y(p,"stroke","#000000 "),m(h,"d","M 11.5,37 C 17,34 27,34 32.5,37"),y(h,"fill","none"),y(h,"stroke","#000000 "),y(r,"fill","none"),y(r,"fill-opacity","1"),y(r,"fill-rule","evenodd"),y(r,"stroke","#000000"),y(r,"stroke-width","1.5"),y(r,"stroke-linecap","round"),y(r,"stroke-linejoin","round"),y(r,"stroke-miterlimit","4"),y(r,"stroke-dasharray","none"),y(r,"stroke-opacity","1\n    "),m(n,"xmlns","http://www.w3.org/2000/svg"),m(n,"version","1.1"),m(n,"width",t[0]),m(n,"height",t[0]),m(n,"viewBox","0 0 45 45")},m(e,t){l(e,n,t),s(n,r),s(r,o),s(r,i),s(r,a),s(r,u),s(r,d),s(r,p),s(r,h)},p(e,[t]){1&t&&m(n,"width",e[0]),1&t&&m(n,"height",e[0])},i:e,o:e,d(e){e&&c(n)}}}function X(e,t,n){let{size:r}=t;return e.$set=e=>{"size"in e&&n(0,r=e.size)},[r]}customElements.define("chess-white-queen",class extends N{constructor(e){super(),F(this,{target:this.shadowRoot},H,W,i,{size:0}),e&&(e.target&&l(e.target,this,e.anchor),e.props&&(this.$set(e.props),R()))}static get observedAttributes(){return["size"]}get size(){return this.$$.ctx[0]}set size(e){this.$set({size:e}),R()}});function Y(t){let n,r;return{c(){n=f("svg"),r=f("path"),this.c=e,m(r,"d","M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "),y(r,"opacity","1"),y(r,"fill","#000000"),y(r,"fill-opacity","1"),y(r,"fill-rule","nonzero"),y(r,"stroke","#000000"),y(r,"stroke-width","1.5"),y(r,"stroke-linecap","round"),y(r,"stroke-linejoin","miter"),y(r,"stroke-miterlimit","4"),y(r,"stroke-dasharray","none"),y(r,"stroke-opacity","1\n    "),m(n,"xmlns","http://www.w3.org/2000/svg"),m(n,"version","1.1"),m(n,"width",t[0]),m(n,"height",t[0]),m(n,"viewBox","0 0 45 45")},m(e,t){l(e,n,t),s(n,r)},p(e,[t]){1&t&&m(n,"width",e[0]),1&t&&m(n,"height",e[0])},i:e,o:e,d(e){e&&c(n)}}}function J(e,t,n){let{size:r}=t;return e.$set=e=>{"size"in e&&n(0,r=e.size)},[r]}customElements.define("chess-white-king",class extends N{constructor(e){super(),F(this,{target:this.shadowRoot},X,Z,i,{size:0}),e&&(e.target&&l(e.target,this,e.anchor),e.props&&(this.$set(e.props),R()))}static get observedAttributes(){return["size"]}get size(){return this.$$.ctx[0]}set size(e){this.$set({size:e}),R()}});function V(t){let n,r,o,i,a,u,d;return{c(){n=f("svg"),r=f("g"),o=f("path"),i=f("path"),a=f("path"),u=f("path"),d=f("path"),this.c=e,m(o,"d","M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"),y(o,"fill","#000000"),y(o,"stroke","#000000\n        "),m(i,"d","M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"),y(i,"fill","#000000"),y(i,"stroke","#000000\n        "),m(a,"d","M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"),y(a,"fill","#ffffff"),y(a,"stroke","#ffffff\n        "),m(u,"d","M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"),m(u,"transform","matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"),y(u,"fill","#ffffff"),y(u,"stroke","#ffffff\n        "),m(d,"d","M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z "),y(d,"fill","#ffffff"),y(d,"stroke","none\n        "),y(r,"opacity","1"),y(r,"fill","none"),y(r,"fill-opacity","1"),y(r,"fill-rule","evenodd"),y(r,"stroke","#000000"),y(r,"stroke-width","1.5"),y(r,"stroke-linecap","round"),y(r,"stroke-linejoin","round"),y(r,"stroke-miterlimit","4"),y(r,"stroke-dasharray","none"),y(r,"stroke-opacity","1\n    "),m(n,"xmlns","http://www.w3.org/2000/svg"),m(n,"version","1.1"),m(n,"width",t[0]),m(n,"height",t[0]),m(n,"viewBox","0 0 45 45")},m(e,t){l(e,n,t),s(n,r),s(r,o),s(r,i),s(r,a),s(r,u),s(r,d)},p(e,[t]){1&t&&m(n,"width",e[0]),1&t&&m(n,"height",e[0])},i:e,o:e,d(e){e&&c(n)}}}function ee(e,t,n){let{size:r}=t;return e.$set=e=>{"size"in e&&n(0,r=e.size)},[r]}customElements.define("chess-black-pawn",class extends N{constructor(e){super(),F(this,{target:this.shadowRoot},J,Y,i,{size:0}),e&&(e.target&&l(e.target,this,e.anchor),e.props&&(this.$set(e.props),R()))}static get observedAttributes(){return["size"]}get size(){return this.$$.ctx[0]}set size(e){this.$set({size:e}),R()}});function te(t){let n,r,o,i,a,u,d;return{c(){n=f("svg"),r=f("g"),o=f("g"),i=f("path"),a=f("path"),u=f("path"),d=f("path"),this.c=e,m(i,"d","M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z"),m(a,"d","M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"),m(u,"d","M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"),y(o,"fill","#000000"),y(o,"stroke","#000000"),y(o,"stroke-linecap","butt\n        "),m(d,"d","M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"),y(d,"fill","none"),y(d,"stroke","#ffffff"),y(d,"stroke-linejoin","miter "),y(r,"opacity","1"),y(r,"fill","none"),y(r,"fill-rule","evenodd"),y(r,"fill-opacity","1"),y(r,"stroke","#000000"),y(r,"stroke-width","1.5"),y(r,"stroke-linecap","round"),y(r,"stroke-linejoin","round"),y(r,"stroke-miterlimit","4"),y(r,"stroke-dasharray","none"),y(r,"stroke-opacity","1\n    "),m(n,"xmlns","http://www.w3.org/2000/svg"),m(n,"version","1.1"),m(n,"width",t[0]),m(n,"height",t[0]),m(n,"viewBox","0 0 45 45")},m(e,t){l(e,n,t),s(n,r),s(r,o),s(o,i),s(o,a),s(o,u),s(r,d)},p(e,[t]){1&t&&m(n,"width",e[0]),1&t&&m(n,"height",e[0])},i:e,o:e,d(e){e&&c(n)}}}function ne(e,t,n){let{size:r}=t;return e.$set=e=>{"size"in e&&n(0,r=e.size)},[r]}customElements.define("chess-black-knight",class extends N{constructor(e){super(),F(this,{target:this.shadowRoot},ee,V,i,{size:0}),e&&(e.target&&l(e.target,this,e.anchor),e.props&&(this.$set(e.props),R()))}static get observedAttributes(){return["size"]}get size(){return this.$$.ctx[0]}set size(e){this.$set({size:e}),R()}});function re(t){let n,r,o,i,a,u,d,p,h,g,v,k,$;return{c(){n=f("svg"),r=f("g"),o=f("path"),i=f("path"),a=f("path"),u=f("path"),d=f("path"),p=f("path"),h=f("path"),g=f("path"),v=f("path"),k=f("path"),$=f("path"),this.c=e,m(o,"d","M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "),y(o,"stroke-linecap","butt\n        "),m(i,"d","M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z "),y(i,"stroke-linecap","butt\n        "),m(a,"d","M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "),y(a,"stroke-linecap","butt\n        "),m(u,"d","M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z "),y(u,"stroke-linecap","butt"),y(u,"stroke-linejoin","miter\n        "),m(d,"d","M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z "),y(d,"stroke-linecap","butt\n        "),m(p,"d","M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z "),y(p,"stroke-linecap","butt\n        "),m(h,"d","M 12,35.5 L 33,35.5 L 33,35.5"),y(h,"fill","none"),y(h,"stroke","#ffffff"),y(h,"stroke-width","1"),y(h,"stroke-linejoin","miter\n        "),m(g,"d","M 13,31.5 L 32,31.5"),y(g,"fill","none"),y(g,"stroke","#ffffff"),y(g,"stroke-width","1"),y(g,"stroke-linejoin","miter\n        "),m(v,"d","M 14,29.5 L 31,29.5"),y(v,"fill","none"),y(v,"stroke","#ffffff"),y(v,"stroke-width","1"),y(v,"stroke-linejoin","miter\n        "),m(k,"d","M 14,16.5 L 31,16.5"),y(k,"fill","none"),y(k,"stroke","#ffffff"),y(k,"stroke-width","1"),y(k,"stroke-linejoin","miter\n        "),m($,"d","M 11,14 L 34,14"),y($,"fill","none"),y($,"stroke","#ffffff"),y($,"stroke-width","1"),y($,"stroke-linejoin","miter\n        "),y(r,"opacity","1"),y(r,"fill","#000000"),y(r,"fill-opacity","1"),y(r,"fill-rule","evenodd"),y(r,"stroke","#000000"),y(r,"stroke-width","1.5"),y(r,"stroke-linecap","round"),y(r,"stroke-linejoin","round"),y(r,"stroke-miterlimit","4"),y(r,"stroke-dasharray","none"),y(r,"stroke-opacity","1\n    "),m(n,"xmlns","http://www.w3.org/2000/svg"),m(n,"version","1.1"),m(n,"width",t[0]),m(n,"height",t[0]),m(n,"viewBox","0 0 45 45")},m(e,t){l(e,n,t),s(n,r),s(r,o),s(r,i),s(r,a),s(r,u),s(r,d),s(r,p),s(r,h),s(r,g),s(r,v),s(r,k),s(r,$)},p(e,[t]){1&t&&m(n,"width",e[0]),1&t&&m(n,"height",e[0])},i:e,o:e,d(e){e&&c(n)}}}function oe(e,t,n){let{size:r}=t;return e.$set=e=>{"size"in e&&n(0,r=e.size)},[r]}customElements.define("chess-black-bishop",class extends N{constructor(e){super(),F(this,{target:this.shadowRoot},ne,te,i,{size:0}),e&&(e.target&&l(e.target,this,e.anchor),e.props&&(this.$set(e.props),R()))}static get observedAttributes(){return["size"]}get size(){return this.$$.ctx[0]}set size(e){this.$set({size:e}),R()}});function ie(t){let n,r,o,i,a,u,d,p,h,g,v,k,$,w,b;return{c(){n=f("svg"),r=f("g"),o=f("g"),i=f("circle"),a=f("circle"),u=f("circle"),d=f("circle"),p=f("circle"),h=f("path"),g=f("path"),v=f("path"),k=f("path"),$=f("path"),w=f("path"),b=f("path"),this.c=e,m(i,"cx","6"),m(i,"cy","12"),m(i,"r","2.75"),m(a,"cx","14"),m(a,"cy","9"),m(a,"r","2.75"),m(u,"cx","22.5"),m(u,"cy","8"),m(u,"r","2.75"),m(d,"cx","31"),m(d,"cy","9"),m(d,"r","2.75"),m(p,"cx","39"),m(p,"cy","12"),m(p,"r","2.75"),y(o,"fill","#000000"),y(o,"stroke","none "),m(h,"d","M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"),y(h,"stroke-linecap","butt"),y(h,"stroke","#000000\n        "),m(g,"d","M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"),y(g,"stroke-linecap","butt "),m(v,"d","M 11,38.5 A 35,35 1 0 0 34,38.5"),y(v,"fill","none"),y(v,"stroke","#000000"),y(v,"stroke-linecap","butt\n        "),m(k,"d","M 11,29 A 35,35 1 0 1 34,29"),y(k,"fill","none"),y(k,"stroke","#ffffff\n        "),m($,"d","M 12.5,31.5 L 32.5,31.5"),y($,"fill","none"),y($,"stroke","#ffffff\n        "),m(w,"d","M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"),y(w,"fill","none"),y(w,"stroke","#ffffff\n        "),m(b,"d","M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"),y(b,"fill","none"),y(b,"stroke","#ffffff\n        "),y(r,"opacity","1"),y(r,"fill","#000000"),y(r,"fill-opacity","1"),y(r,"fill-rule","evenodd"),y(r,"stroke","#000000"),y(r,"stroke-width","1.5"),y(r,"stroke-linecap","round"),y(r,"stroke-linejoin","round"),y(r,"stroke-miterlimit","4"),y(r,"stroke-dasharray","none"),y(r,"stroke-opacity","1\n    "),m(n,"xmlns","http://www.w3.org/2000/svg"),m(n,"version","1.1"),m(n,"width",t[0]),m(n,"height",t[0]),m(n,"viewBox","0 0 45 45")},m(e,t){l(e,n,t),s(n,r),s(r,o),s(o,i),s(o,a),s(o,u),s(o,d),s(o,p),s(r,h),s(r,g),s(r,v),s(r,k),s(r,$),s(r,w),s(r,b)},p(e,[t]){1&t&&m(n,"width",e[0]),1&t&&m(n,"height",e[0])},i:e,o:e,d(e){e&&c(n)}}}function se(e,t,n){let{size:r}=t;return e.$set=e=>{"size"in e&&n(0,r=e.size)},[r]}customElements.define("chess-black-rook",class extends N{constructor(e){super(),F(this,{target:this.shadowRoot},oe,re,i,{size:0}),e&&(e.target&&l(e.target,this,e.anchor),e.props&&(this.$set(e.props),R()))}static get observedAttributes(){return["size"]}get size(){return this.$$.ctx[0]}set size(e){this.$set({size:e}),R()}});function le(t){let n,r,o,i,a,u,d,p;return{c(){n=f("svg"),r=f("g"),o=f("path"),i=f("path"),a=f("path"),u=f("path"),d=f("path"),p=f("path"),this.c=e,m(o,"d","M 22.5,11.63 L 22.5,6"),y(o,"fill","none"),y(o,"stroke","#000000"),y(o,"stroke-linejoin","miter\n        "),m(o,"id","path6570"),m(i,"d","M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"),y(i,"fill","#000000"),y(i,"fill-opacity","1"),y(i,"stroke-linecap","butt"),y(i,"stroke-linejoin","miter\n        "),m(a,"d","M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "),y(a,"fill","#000000"),y(a,"stroke","#000000\n        "),m(u,"d","M 20,8 L 25,8"),y(u,"fill","none"),y(u,"stroke","#000000"),y(u,"stroke-linejoin","miter\n        "),m(d,"d","M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85"),y(d,"fill","none"),y(d,"stroke","#ffffff\n        "),m(p,"d","M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37"),y(p,"fill","none"),y(p,"stroke","#ffffff\n        "),y(r,"fill","none"),y(r,"fill-opacity","1"),y(r,"fill-rule","evenodd"),y(r,"stroke","#000000"),y(r,"stroke-width","1.5"),y(r,"stroke-linecap","round"),y(r,"stroke-linejoin","round"),y(r,"stroke-miterlimit","4"),y(r,"stroke-dasharray","none"),y(r,"stroke-opacity","1\n    "),m(n,"xmlns","http://www.w3.org/2000/svg"),m(n,"version","1.1"),m(n,"width",t[0]),m(n,"height",t[0]),m(n,"viewBox","0 0 45 45")},m(e,t){l(e,n,t),s(n,r),s(r,o),s(r,i),s(r,a),s(r,u),s(r,d),s(r,p)},p(e,[t]){1&t&&m(n,"width",e[0]),1&t&&m(n,"height",e[0])},i:e,o:e,d(e){e&&c(n)}}}function ce(e,t,n){let{size:r}=t;return e.$set=e=>{"size"in e&&n(0,r=e.size)},[r]}customElements.define("chess-black-queen",class extends N{constructor(e){super(),F(this,{target:this.shadowRoot},se,ie,i,{size:0}),e&&(e.target&&l(e.target,this,e.anchor),e.props&&(this.$set(e.props),R()))}static get observedAttributes(){return["size"]}get size(){return this.$$.ctx[0]}set size(e){this.$set({size:e}),R()}});function ae(e,t){return`${String.fromCharCode("a".charCodeAt(0)+e)}${String.fromCharCode("1".charCodeAt(0)+t)}`}function ue(e,t,n){return e.get(ae(t,n))}customElements.define("chess-black-king",class extends N{constructor(e){super(),F(this,{target:this.shadowRoot},ce,le,i,{size:0}),e&&(e.target&&l(e.target,this,e.anchor),e.props&&(this.$set(e.props),R()))}static get observedAttributes(){return["size"]}get size(){return this.$$.ctx[0]}set size(e){this.$set({size:e}),R()}});var fe,de=(function(e,t){t.Chess=function(e){var t="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",n=["1-0","0-1","1/2-1/2","*"],r={b:[16,32,17,15],w:[-16,-32,-17,-15]},o={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},i=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],s=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],l={p:0,n:1,b:2,r:3,q:4,k:5},c={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},a={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},u={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},f={w:[{square:u.a1,flag:a.QSIDE_CASTLE},{square:u.h1,flag:a.KSIDE_CASTLE}],b:[{square:u.a8,flag:a.QSIDE_CASTLE},{square:u.h8,flag:a.KSIDE_CASTLE}]},d=new Array(128),p={w:-1,b:-1},h="w",g={w:0,b:0},m=-1,v=0,k=1,y=[],$={};function w(e){void 0===e&&(e=!1),d=new Array(128),p={w:-1,b:-1},h="w",g={w:0,b:0},m=-1,v=0,k=1,y=[],e||($={}),L(z())}function b(){_(t)}function _(e,t){void 0===t&&(t=!1);var n=e.split(/\s+/),r=n[0],o=0;if(!C(e).valid)return!1;w(t);for(var i=0;i<r.length;i++){var s=r.charAt(i);if("/"===s)o+=8;else if(-1!=="0123456789".indexOf(s))o+=parseInt(s,10);else{var l=s<"a"?"w":"b";A({type:s.toLowerCase(),color:l},G(o)),o++}}return h=n[1],n[2].indexOf("K")>-1&&(g.w|=a.KSIDE_CASTLE),n[2].indexOf("Q")>-1&&(g.w|=a.QSIDE_CASTLE),n[2].indexOf("k")>-1&&(g.b|=a.KSIDE_CASTLE),n[2].indexOf("q")>-1&&(g.b|=a.QSIDE_CASTLE),m="-"===n[3]?-1:u[n[3]],v=parseInt(n[4],10),k=parseInt(n[5],10),L(z()),!0}function C(e){var t="No errors.",n="FEN string must contain six space-delimited fields.",r="6th field (move number) must be a positive integer.",o="5th field (half move counter) must be a non-negative integer.",i="4th field (en-passant square) is invalid.",s="3rd field (castling availability) is invalid.",l="2nd field (side to move) is invalid.",c="1st field (piece positions) does not contain 8 '/'-delimited rows.",a="1st field (piece positions) is invalid [consecutive numbers].",u="1st field (piece positions) is invalid [invalid piece].",f="1st field (piece positions) is invalid [row too large].",d="Illegal en-passant square",p=e.split(/\s+/);if(6!==p.length)return{valid:!1,error_number:1,error:n};if(isNaN(p[5])||parseInt(p[5],10)<=0)return{valid:!1,error_number:2,error:r};if(isNaN(p[4])||parseInt(p[4],10)<0)return{valid:!1,error_number:3,error:o};if(!/^(-|[abcdefgh][36])$/.test(p[3]))return{valid:!1,error_number:4,error:i};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(p[2]))return{valid:!1,error_number:5,error:s};if(!/^(w|b)$/.test(p[1]))return{valid:!1,error_number:6,error:l};var h=p[0].split("/");if(8!==h.length)return{valid:!1,error_number:7,error:c};for(var g=0;g<h.length;g++){for(var m=0,v=!1,k=0;k<h[g].length;k++)if(isNaN(h[g][k])){if(!/^[prnbqkPRNBQK]$/.test(h[g][k]))return{valid:!1,error_number:9,error:u};m+=1,v=!1}else{if(v)return{valid:!1,error_number:8,error:a};m+=parseInt(h[g][k],10),v=!0}if(8!==m)return{valid:!1,error_number:10,error:f}}return"3"==p[3][1]&&"w"==p[1]||"6"==p[3][1]&&"b"==p[1]?{valid:!1,error_number:11,error:d}:{valid:!0,error_number:0,error:t}}function z(){for(var e=0,t="",n=u.a8;n<=u.h1;n++){if(null==d[n])e++;else{e>0&&(t+=e,e=0);var r=d[n].color,o=d[n].type;t+="w"===r?o.toUpperCase():o.toLowerCase()}n+1&136&&(e>0&&(t+=e),n!==u.h1&&(t+="/"),e=0,n+=8)}var i="";g.w&a.KSIDE_CASTLE&&(i+="K"),g.w&a.QSIDE_CASTLE&&(i+="Q"),g.b&a.KSIDE_CASTLE&&(i+="k"),g.b&a.QSIDE_CASTLE&&(i+="q"),i=i||"-";var s=-1===m?"-":G(m);return[t,h,i,s,v,k].join(" ")}function x(e){for(var t=0;t<e.length;t+=2)"string"==typeof e[t]&&"string"==typeof e[t+1]&&($[e[t]]=e[t+1]);return $}function L(e){y.length>0||(e!==t?($.SetUp="1",$.FEN=e):(delete $.SetUp,delete $.FEN))}function E(e){var t=d[u[e]];return t?{type:t.type,color:t.color}:null}function A(e,t){if(!("type"in e&&"color"in e))return!1;if(-1==="pnbrqkPNBRQK".indexOf(e.type.toLowerCase()))return!1;if(!(t in u))return!1;var n=u[t];return("k"!=e.type||-1==p[e.color]||p[e.color]==n)&&(d[n]={type:e.type,color:e.color},"k"===e.type&&(p[e.color]=n),L(z()),!0)}function M(e,t,n,r,o){var i={color:h,from:t,to:n,flags:r,piece:e[t].type};return o&&(i.flags|=a.PROMOTION,i.promotion=o),e[n]?i.captured=e[n].type:r&a.EP_CAPTURE&&(i.captured="p"),i}function P(e){function t(e,t,n,r,o){if("p"!==e[n].type||0!==Q(r)&&7!==Q(r))t.push(M(e,n,r,o));else for(var i=["q","r","b","n"],s=0,l=i.length;s<l;s++)t.push(M(e,n,r,o,i[s]))}var n=[],i=h,s=W(i),l={b:1,w:6},c=u.a8,f=u.h1,v=!1,k=!(void 0!==e&&"legal"in e)||e.legal;if(void 0!==e&&"square"in e){if(!(e.square in u))return[];c=f=u[e.square],v=!0}for(var y=c;y<=f;y++)if(136&y)y+=7;else{var $=d[y];if(null!=$&&$.color===i)if("p"===$.type){var w=y+r[i][0];for(null==d[w]&&(t(d,n,y,w,a.NORMAL),w=y+r[i][1],l[i]===Q(y)&&null==d[w]&&t(d,n,y,w,a.BIG_PAWN)),b=2;b<4;b++)136&(w=y+r[i][b])||(null!=d[w]&&d[w].color===s?t(d,n,y,w,a.CAPTURE):w===m&&t(d,n,y,m,a.EP_CAPTURE))}else for(var b=0,_=o[$.type].length;b<_;b++){var C=o[$.type][b];for(w=y;!(136&(w+=C));){if(null!=d[w]){if(d[w].color===i)break;t(d,n,y,w,a.CAPTURE);break}if(t(d,n,y,w,a.NORMAL),"n"===$.type||"k"===$.type)break}}}if(!v||f===p[i]){if(g[i]&a.KSIDE_CASTLE){var z=(x=p[i])+2;null!=d[x+1]||null!=d[z]||I(s,p[i])||I(s,x+1)||I(s,z)||t(d,n,p[i],z,a.KSIDE_CASTLE)}var x;if(g[i]&a.QSIDE_CASTLE)z=(x=p[i])-2,null!=d[x-1]||null!=d[x-2]||null!=d[x-3]||I(s,p[i])||I(s,x-1)||I(s,z)||t(d,n,p[i],z,a.QSIDE_CASTLE)}if(!k)return n;var L=[];for(y=0,_=n.length;y<_;y++)O(n[y]),T(i)||L.push(n[y]),B();return L}function S(e,t){var n="";if(e.flags&a.KSIDE_CASTLE)n="O-O";else if(e.flags&a.QSIDE_CASTLE)n="O-O-O";else{var r=function(e,t){for(var n=P({legal:!t}),r=e.from,o=e.to,i=e.piece,s=0,l=0,c=0,a=0,u=n.length;a<u;a++){var f=n[a].from,d=n[a].to,p=n[a].piece;i===p&&r!==f&&o===d&&(s++,Q(r)===Q(f)&&l++,U(r)===U(f)&&c++)}return s>0?l>0&&c>0?G(r):c>0?G(r).charAt(1):G(r).charAt(0):""}(e,t);"p"!==e.piece&&(n+=e.piece.toUpperCase()+r),e.flags&(a.CAPTURE|a.EP_CAPTURE)&&("p"===e.piece&&(n+=G(e.from)[0]),n+="x"),n+=G(e.to),e.flags&a.PROMOTION&&(n+="="+e.promotion.toUpperCase())}return O(e),q()&&(F()?n+="#":n+="+"),B(),n}function R(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function I(e,t){for(var n=u.a8;n<=u.h1;n++)if(136&n)n+=7;else if(null!=d[n]&&d[n].color===e){var r=d[n],o=n-t,c=o+119;if(i[c]&1<<l[r.type]){if("p"===r.type){if(o>0){if("w"===r.color)return!0}else if("b"===r.color)return!0;continue}if("n"===r.type||"k"===r.type)return!0;for(var a=s[c],f=n+a,p=!1;f!==t;){if(null!=d[f]){p=!0;break}f+=a}if(!p)return!0}}return!1}function T(e){return I(W(e),p[e])}function q(){return T(h)}function F(){return q()&&0===P().length}function N(){return!q()&&0===P().length}function j(){for(var e={},t=[],n=0,r=0,o=u.a8;o<=u.h1;o++)if(r=(r+1)%2,136&o)o+=7;else{var i=d[o];i&&(e[i.type]=i.type in e?e[i.type]+1:1,"b"===i.type&&t.push(r),n++)}if(2===n)return!0;if(3===n&&(1===e.b||1===e.n))return!0;if(n===e.b+2){var s=0,l=t.length;for(o=0;o<l;o++)s+=t[o];if(0===s||s===l)return!0}return!1}function D(){for(var e=[],t={},n=!1;;){var r=B();if(!r)break;e.push(r)}for(;;){var o=z().split(" ").slice(0,4).join(" ");if(t[o]=o in t?t[o]+1:1,t[o]>=3&&(n=!0),!e.length)break;O(e.pop())}return n}function O(e){var t=h,n=W(t);if(function(e){y.push({move:e,kings:{b:p.b,w:p.w},turn:h,castling:{b:g.b,w:g.w},ep_square:m,half_moves:v,move_number:k})}(e),d[e.to]=d[e.from],d[e.from]=null,e.flags&a.EP_CAPTURE&&("b"===h?d[e.to-16]=null:d[e.to+16]=null),e.flags&a.PROMOTION&&(d[e.to]={type:e.promotion,color:t}),"k"===d[e.to].type){if(p[d[e.to].color]=e.to,e.flags&a.KSIDE_CASTLE){var r=e.to-1,o=e.to+1;d[r]=d[o],d[o]=null}else e.flags&a.QSIDE_CASTLE&&(r=e.to+1,o=e.to-2,d[r]=d[o],d[o]=null);g[t]=""}if(g[t])for(var i=0,s=f[t].length;i<s;i++)if(e.from===f[t][i].square&&g[t]&f[t][i].flag){g[t]^=f[t][i].flag;break}if(g[n])for(i=0,s=f[n].length;i<s;i++)if(e.to===f[n][i].square&&g[n]&f[n][i].flag){g[n]^=f[n][i].flag;break}m=e.flags&a.BIG_PAWN?"b"===h?e.to-16:e.to+16:-1,"p"===e.piece||e.flags&(a.CAPTURE|a.EP_CAPTURE)?v=0:v++,"b"===h&&k++,h=W(h)}function B(){var e=y.pop();if(null==e)return null;var t=e.move;p=e.kings,h=e.turn,g=e.castling,m=e.ep_square,v=e.half_moves,k=e.move_number;var n,r,o=h,i=W(h);if(d[t.from]=d[t.to],d[t.from].type=t.piece,d[t.to]=null,t.flags&a.CAPTURE)d[t.to]={type:t.captured,color:i};else if(t.flags&a.EP_CAPTURE){var s;s="b"===o?t.to-16:t.to+16,d[s]={type:"p",color:i}}return t.flags&(a.KSIDE_CASTLE|a.QSIDE_CASTLE)&&(t.flags&a.KSIDE_CASTLE?(n=t.to+1,r=t.to-1):t.flags&a.QSIDE_CASTLE&&(n=t.to-2,r=t.to+1),d[n]=d[r],d[r]=null),t}function K(e,t){var n=R(e);if(t){var r=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);if(r)var o=r[1],i=r[2],s=r[3],l=r[4]}for(var c=P(),a=0,f=c.length;a<f;a++){if(n===R(S(c[a]))||t&&n===R(S(c[a],!0)))return c[a];if(r&&(!o||o.toLowerCase()==c[a].piece)&&u[i]==c[a].from&&u[s]==c[a].to&&(!l||l.toLowerCase()==c[a].promotion))return c[a]}return null}function Q(e){return e>>4}function U(e){return 15&e}function G(e){var t=U(e),n=Q(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(n,n+1)}function W(e){return"w"===e?"b":"w"}function H(e){var t=function e(t){var n=t instanceof Array?[]:{};for(var r in t)n[r]="object"==typeof r?e(t[r]):t[r];return n}(e);t.san=S(t,!1),t.to=G(t.to),t.from=G(t.from);var n="";for(var r in a)a[r]&t.flags&&(n+=c[r]);return t.flags=n,t}function Z(e){return e.replace(/^\s+|\s+$/g,"")}return _(void 0===e?t:e),{WHITE:"w",BLACK:"b",PAWN:"p",KNIGHT:"n",BISHOP:"b",ROOK:"r",QUEEN:"q",KING:"k",SQUARES:function(){for(var e=[],t=u.a8;t<=u.h1;t++)136&t?t+=7:e.push(G(t));return e}(),FLAGS:c,load:function(e){return _(e)},reset:function(){return b()},moves:function(e){for(var t=P(e),n=[],r=0,o=t.length;r<o;r++)void 0!==e&&"verbose"in e&&e.verbose?n.push(H(t[r])):n.push(S(t[r],!1));return n},in_check:function(){return q()},in_checkmate:function(){return F()},in_stalemate:function(){return N()},in_draw:function(){return v>=100||N()||j()||D()},insufficient_material:function(){return j()},in_threefold_repetition:function(){return D()},game_over:function(){return v>=100||F()||N()||j()||D()},validate_fen:function(e){return C(e)},fen:function(){return z()},board:function(){for(var e=[],t=[],n=u.a8;n<=u.h1;n++)null==d[n]?t.push(null):t.push({type:d[n].type,color:d[n].color}),n+1&136&&(e.push(t),t=[],n+=8);return e},pgn:function(e){var t="object"==typeof e&&"string"==typeof e.newline_char?e.newline_char:"\n",n="object"==typeof e&&"number"==typeof e.max_width?e.max_width:0,r=[],o=!1;for(var i in $)r.push("["+i+' "'+$[i]+'"]'+t),o=!0;o&&y.length&&r.push(t);for(var s=[];y.length>0;)s.push(B());for(var l=[],c="";s.length>0;){var a=s.pop();y.length||"b"!==a.color?"w"===a.color&&(c.length&&l.push(c),c=k+"."):c=k+". ...",c=c+" "+S(a,!1),O(a)}if(c.length&&l.push(c),void 0!==$.Result&&l.push($.Result),0===n)return r.join("")+l.join(" ");var u=0;for(i=0;i<l.length;i++)u+l[i].length>n&&0!==i?(" "===r[r.length-1]&&r.pop(),r.push(t),u=0):0!==i&&(r.push(" "),u++),r.push(l[i]),u+=l[i].length;return r.join("")},load_pgn:function(e,t){var r=void 0!==t&&"sloppy"in t&&t.sloppy;function o(e){return e.replace(/\\/g,"\\")}var i="object"==typeof t&&"string"==typeof t.newline_char?t.newline_char:"\r?\n",s=new RegExp("^(\\[((?:"+o(i)+")|.)*\\])(?:"+o(i)+"){2}"),l=s.test(e)?s.exec(e)[1]:"";b();var c=function(e,t){for(var n="object"==typeof t&&"string"==typeof t.newline_char?t.newline_char:"\r?\n",r={},i=e.split(new RegExp(o(n))),s="",l="",c=0;c<i.length;c++)s=i[c].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),l=i[c].replace(/^\[[A-Za-z]+\s"(.*)"\]$/,"$1"),Z(s).length>0&&(r[s]=l);return r}(l,t);for(var a in c)x([a,c[a]]);if("1"===c.SetUp&&!("FEN"in c&&_(c.FEN,!0)))return!1;var u=e.replace(l,"").replace(new RegExp(o(i),"g")," ");u=u.replace(/(\{[^}]+\})+?/g,"");for(var f=/(\([^\(\)]+\))+?/g;f.test(u);)u=u.replace(f,"");var d=Z(u=(u=(u=u.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).split(new RegExp(/\s+/));d=d.join(",").replace(/,,+/g,",").split(",");for(var p="",h=0;h<d.length-1;h++){if(null==(p=K(d[h],r)))return!1;O(p)}if(p=d[d.length-1],n.indexOf(p)>-1)(function(e){for(var t in e)return!0;return!1})($)&&void 0===$.Result&&x(["Result",p]);else{if(null==(p=K(p,r)))return!1;O(p)}return!0},header:function(){return x(arguments)},ascii:function(){return function(){for(var e="   +------------------------+\n",t=u.a8;t<=u.h1;t++){if(0===U(t)&&(e+=" "+"87654321"[Q(t)]+" |"),null==d[t])e+=" . ";else{var n=d[t].type;e+=" "+("w"===d[t].color?n.toUpperCase():n.toLowerCase())+" "}t+1&136&&(e+="|\n",t+=8)}return e+="   +------------------------+\n",e+="     a  b  c  d  e  f  g  h\n"}()},turn:function(){return h},move:function(e,t){var n=void 0!==t&&"sloppy"in t&&t.sloppy,r=null;if("string"==typeof e)r=K(e,n);else if("object"==typeof e)for(var o=P(),i=0,s=o.length;i<s;i++)if(!(e.from!==G(o[i].from)||e.to!==G(o[i].to)||"promotion"in o[i]&&e.promotion!==o[i].promotion)){r=o[i];break}if(!r)return null;var l=H(r);return O(r),l},undo:function(){var e=B();return e?H(e):null},clear:function(){return w()},put:function(e,t){return A(e,t)},get:function(e){return E(e)},remove:function(e){return function(e){var t=E(e);return d[u[e]]=null,t&&"k"===t.type&&(p[t.color]=-1),L(z()),t}(e)},perft:function(e){return function e(t){for(var n=P({legal:!1}),r=0,o=h,i=0,s=n.length;i<s;i++)O(n[i]),T(o)||(t-1>0?r+=e(t-1):r++),B();return r}(e)},square_color:function(e){if(e in u){var t=u[e];return(Q(t)+U(t))%2==0?"light":"dark"}return null},history:function(e){for(var t=[],n=[],r=(void 0!==e&&"verbose"in e&&e.verbose);y.length>0;)t.push(B());for(;t.length>0;){var o=t.pop();r?n.push(H(o)):n.push(S(o)),O(o)}return n}}}}(fe={exports:{}},fe.exports),fe.exports).Chess;function pe({x:e,y:t,cellsSize:n,reversed:r}){const o=Math.floor((e-.5*n)/n),i=Math.floor((t-.5*n)/n);return[[!0,"true"].includes(r)?7-o:o,[!0,"true"].includes(r)?i:7-i]}function he(e,t){if(!t)return;const n=t.getBoundingClientRect();return[e.clientX-n.x,e.clientY-n.y]}function ge({startFile:e,startRank:t,endFile:n,endRank:r,promotion:o="q"}){return{from:ae(e,t),to:ae(n,r),promotion:o}}function me(e,t,n){const r=e.slice();return r[104]=t[n],r}function ve(e,t,n){const r=e.slice();return r[104]=t[n],r}function ke(e,t,n){const r=e.slice();return r[107]=t[n],r}function ye(e,t,n){const r=e.slice();return r[104]=t[n],r}function $e(e){let t,n,r=String.fromCharCode("A".charCodeAt(0)+e[104])+"";return{c(){t=u("div"),n=d(r),m(t,"class","coordinate"),m(t,"style",e[21])},m(e,r){l(e,t,r),s(t,n)},p(e,o){2048&o[0]&&r!==(r=String.fromCharCode("A".charCodeAt(0)+e[104])+"")&&k(n,r),2097152&o[0]&&m(t,"style",e[21])},d(e){e&&c(t)}}}function we(e){let t,n;return{c(){t=u("div"),m(t,"style",n=e[9]===e[104]&&e[10]===e[107]?e[23]:e[9]===e[104]||e[10]===e[107]?e[24]:"")},m(e,n){l(e,t,n)},p(e,r){25173504&r[0]&&n!==(n=e[9]===e[104]&&e[10]===e[107]?e[23]:e[9]===e[104]||e[10]===e[107]?e[24]:"")&&m(t,"style",n)},d(e){e&&c(t)}}}function be(e){let t,n;return{c(){t=u("chess-black-king"),v(t,"size",e[13]),v(t,"style",n=e[9]===e[104]&&e[10]===e[107]?e[23]:e[9]===e[104]||e[10]===e[107]?e[24]:"")},m(e,n){l(e,t,n)},p(e,r){8192&r[0]&&v(t,"size",e[13]),25173504&r[0]&&n!==(n=e[9]===e[104]&&e[10]===e[107]?e[23]:e[9]===e[104]||e[10]===e[107]?e[24]:"")&&v(t,"style",n)},d(e){e&&c(t)}}}function _e(e){let t,n;return{c(){t=u("chess-black-queen"),v(t,"size",e[13]),v(t,"style",n=e[9]===e[104]&&e[10]===e[107]?e[23]:e[9]===e[104]||e[10]===e[107]?e[24]:"")},m(e,n){l(e,t,n)},p(e,r){8192&r[0]&&v(t,"size",e[13]),25173504&r[0]&&n!==(n=e[9]===e[104]&&e[10]===e[107]?e[23]:e[9]===e[104]||e[10]===e[107]?e[24]:"")&&v(t,"style",n)},d(e){e&&c(t)}}}function Ce(e){let t,n;return{c(){t=u("chess-black-rook"),v(t,"size",e[13]),v(t,"style",n=e[9]===e[104]&&e[10]===e[107]?e[23]:e[9]===e[104]||e[10]===e[107]?e[24]:"")},m(e,n){l(e,t,n)},p(e,r){8192&r[0]&&v(t,"size",e[13]),25173504&r[0]&&n!==(n=e[9]===e[104]&&e[10]===e[107]?e[23]:e[9]===e[104]||e[10]===e[107]?e[24]:"")&&v(t,"style",n)},d(e){e&&c(t)}}}function ze(e){let t,n;return{c(){t=u("chess-black-bishop"),v(t,"size",e[13]),v(t,"style",n=e[9]===e[104]&&e[10]===e[107]?e[23]:e[9]===e[104]||e[10]===e[107]?e[24]:"")},m(e,n){l(e,t,n)},p(e,r){8192&r[0]&&v(t,"size",e[13]),25173504&r[0]&&n!==(n=e[9]===e[104]&&e[10]===e[107]?e[23]:e[9]===e[104]||e[10]===e[107]?e[24]:"")&&v(t,"style",n)},d(e){e&&c(t)}}}function xe(e){let t,n;return{c(){t=u("chess-black-knight"),v(t,"size",e[13]),v(t,"style",n=e[9]===e[104]&&e[10]===e[107]?e[23]:e[9]===e[104]||e[10]===e[107]?e[24]:"")},m(e,n){l(e,t,n)},p(e,r){8192&r[0]&&v(t,"size",e[13]),25173504&r[0]&&n!==(n=e[9]===e[104]&&e[10]===e[107]?e[23]:e[9]===e[104]||e[10]===e[107]?e[24]:"")&&v(t,"style",n)},d(e){e&&c(t)}}}function Le(e){let t,n;return{c(){t=u("chess-black-pawn"),v(t,"size",e[13]),v(t,"style",n=e[9]===e[104]&&e[10]===e[107]?e[23]:e[9]===e[104]||e[10]===e[107]?e[24]:"")},m(e,n){l(e,t,n)},p(e,r){8192&r[0]&&v(t,"size",e[13]),25173504&r[0]&&n!==(n=e[9]===e[104]&&e[10]===e[107]?e[23]:e[9]===e[104]||e[10]===e[107]?e[24]:"")&&v(t,"style",n)},d(e){e&&c(t)}}}function Ee(e){let t,n;return{c(){t=u("chess-white-king"),v(t,"size",e[13]),v(t,"style",n=e[9]===e[104]&&e[10]===e[107]?e[23]:e[9]===e[104]||e[10]===e[107]?e[24]:"")},m(e,n){l(e,t,n)},p(e,r){8192&r[0]&&v(t,"size",e[13]),25173504&r[0]&&n!==(n=e[9]===e[104]&&e[10]===e[107]?e[23]:e[9]===e[104]||e[10]===e[107]?e[24]:"")&&v(t,"style",n)},d(e){e&&c(t)}}}function Ae(e){let t,n;return{c(){t=u("chess-white-queen"),v(t,"size",e[13]),v(t,"style",n=e[9]===e[104]&&e[10]===e[107]?e[23]:e[9]===e[104]||e[10]===e[107]?e[24]:"")},m(e,n){l(e,t,n)},p(e,r){8192&r[0]&&v(t,"size",e[13]),25173504&r[0]&&n!==(n=e[9]===e[104]&&e[10]===e[107]?e[23]:e[9]===e[104]||e[10]===e[107]?e[24]:"")&&v(t,"style",n)},d(e){e&&c(t)}}}function Me(e){let t,n;return{c(){t=u("chess-white-rook"),v(t,"size",e[13]),v(t,"style",n=e[9]===e[104]&&e[10]===e[107]?e[23]:e[9]===e[104]||e[10]===e[107]?e[24]:"")},m(e,n){l(e,t,n)},p(e,r){8192&r[0]&&v(t,"size",e[13]),25173504&r[0]&&n!==(n=e[9]===e[104]&&e[10]===e[107]?e[23]:e[9]===e[104]||e[10]===e[107]?e[24]:"")&&v(t,"style",n)},d(e){e&&c(t)}}}function Pe(e){let t,n;return{c(){t=u("chess-white-bishop"),v(t,"size",e[13]),v(t,"style",n=e[9]===e[104]&&e[10]===e[107]?e[23]:e[9]===e[104]||e[10]===e[107]?e[24]:"")},m(e,n){l(e,t,n)},p(e,r){8192&r[0]&&v(t,"size",e[13]),25173504&r[0]&&n!==(n=e[9]===e[104]&&e[10]===e[107]?e[23]:e[9]===e[104]||e[10]===e[107]?e[24]:"")&&v(t,"style",n)},d(e){e&&c(t)}}}function Se(e){let t,n;return{c(){t=u("chess-white-knight"),v(t,"size",e[13]),v(t,"style",n=e[9]===e[104]&&e[10]===e[107]?e[23]:e[9]===e[104]||e[10]===e[107]?e[24]:"")},m(e,n){l(e,t,n)},p(e,r){8192&r[0]&&v(t,"size",e[13]),25173504&r[0]&&n!==(n=e[9]===e[104]&&e[10]===e[107]?e[23]:e[9]===e[104]||e[10]===e[107]?e[24]:"")&&v(t,"style",n)},d(e){e&&c(t)}}}function Re(e){let t,n;return{c(){t=u("chess-white-pawn"),v(t,"size",e[13]),v(t,"style",n=e[9]===e[104]&&e[10]===e[107]?e[23]:e[9]===e[104]||e[10]===e[107]?e[24]:"")},m(e,n){l(e,t,n)},p(e,r){8192&r[0]&&v(t,"size",e[13]),25173504&r[0]&&n!==(n=e[9]===e[104]&&e[10]===e[107]?e[23]:e[9]===e[104]||e[10]===e[107]?e[24]:"")&&v(t,"style",n)},d(e){e&&c(t)}}}function Ie(e){let t,n;return{c(){t=u("div"),m(t,"style",n=e[9]!==e[104]||e[10]!==e[107]?e[22]:e[23])},m(e,n){l(e,t,n)},p(e,r){12590592&r[0]&&n!==(n=e[9]!==e[104]||e[10]!==e[107]?e[22]:e[23])&&m(t,"style",n)},d(e){e&&c(t)}}}function Te(e){let t,n,r,o,i,s,a,f,d,p,h,g,v,k,y;function $(e,t){return(null==n||6400&t[0])&&(n=!!function(e,t,n){if([void 0,null].includes(e))return;const r=e.originCell;return[void 0,null].includes(r)?void 0:r.file===t&&r.rank===n}(e[8],e[104],e[107])),n?Ie:((null==r||6176&t[0])&&(r=!!function(e,t,n){const r=ue(e,t,n);return![null,void 0].includes(r)&&("p"===r.type&&"w"===r.color)}(e[5],e[104],e[107])),r?Re:((null==o||6176&t[0])&&(o=!!function(e,t,n){const r=ue(e,t,n);return![null,void 0].includes(r)&&("n"===r.type&&"w"===r.color)}(e[5],e[104],e[107])),o?Se:((null==i||6176&t[0])&&(i=!!function(e,t,n){const r=ue(e,t,n);return![null,void 0].includes(r)&&("b"===r.type&&"w"===r.color)}(e[5],e[104],e[107])),i?Pe:((null==s||6176&t[0])&&(s=!!function(e,t,n){const r=ue(e,t,n);return![null,void 0].includes(r)&&("r"===r.type&&"w"===r.color)}(e[5],e[104],e[107])),s?Me:((null==a||6176&t[0])&&(a=!!function(e,t,n){const r=ue(e,t,n);return![null,void 0].includes(r)&&("q"===r.type&&"w"===r.color)}(e[5],e[104],e[107])),a?Ae:((null==f||6176&t[0])&&(f=!!function(e,t,n){const r=ue(e,t,n);return![null,void 0].includes(r)&&("k"===r.type&&"w"===r.color)}(e[5],e[104],e[107])),f?Ee:((null==d||6176&t[0])&&(d=!!function(e,t,n){const r=ue(e,t,n);return![null,void 0].includes(r)&&("p"===r.type&&"b"===r.color)}(e[5],e[104],e[107])),d?Le:((null==p||6176&t[0])&&(p=!!function(e,t,n){const r=ue(e,t,n);return![null,void 0].includes(r)&&("n"===r.type&&"b"===r.color)}(e[5],e[104],e[107])),p?xe:((null==h||6176&t[0])&&(h=!!function(e,t,n){const r=ue(e,t,n);return![null,void 0].includes(r)&&("b"===r.type&&"b"===r.color)}(e[5],e[104],e[107])),h?ze:((null==g||6176&t[0])&&(g=!!function(e,t,n){const r=ue(e,t,n);return![null,void 0].includes(r)&&("r"===r.type&&"b"===r.color)}(e[5],e[104],e[107])),g?Ce:((null==v||6176&t[0])&&(v=!!function(e,t,n){const r=ue(e,t,n);return![null,void 0].includes(r)&&("q"===r.type&&"b"===r.color)}(e[5],e[104],e[107])),v?_e:((null==k||6176&t[0])&&(k=!!function(e,t,n){const r=ue(e,t,n);return![null,void 0].includes(r)&&("k"===r.type&&"b"===r.color)}(e[5],e[104],e[107])),k?be:we))))))))))))}let w=$(e,[-1]),b=w(e);return{c(){t=u("div"),b.c(),m(t,"class","cell"),m(t,"style",y=(e[107]+e[104])%2==0?e[19]:e[20])},m(e,n){l(e,t,n),b.m(t,null)},p(e,n){w===(w=$(e,n))&&b?b.p(e,n):(b.d(1),b=w(e),b&&(b.c(),b.m(t,null))),1579008&n[0]&&y!==(y=(e[107]+e[104])%2==0?e[19]:e[20])&&m(t,"style",y)},d(e){e&&c(t),b.d()}}}function qe(e){let t,n,r,o,i,f,h=String.fromCharCode("1".charCodeAt(0)+e[107])+"",g=String.fromCharCode("1".charCodeAt(0)+e[107])+"",v=e[11],y=[];for(let t=0;t<v.length;t+=1)y[t]=Te(ve(e,v,t));return{c(){t=u("div"),n=d(h),r=p();for(let e=0;e<y.length;e+=1)y[e].c();o=p(),i=u("div"),f=d(g),m(t,"class","coordinate"),m(t,"style",e[21]),m(i,"class","coordinate"),m(i,"style",e[21])},m(e,c){l(e,t,c),s(t,n),l(e,r,c);for(let t=0;t<y.length;t+=1)y[t].m(e,c);l(e,o,c),l(e,i,c),s(i,f)},p(e,r){if(4096&r[0]&&h!==(h=String.fromCharCode("1".charCodeAt(0)+e[107])+"")&&k(n,h),2097152&r[0]&&m(t,"style",e[21]),30949152&r[0]){let t;for(v=e[11],t=0;t<v.length;t+=1){const n=ve(e,v,t);y[t]?y[t].p(n,r):(y[t]=Te(n),y[t].c(),y[t].m(o.parentNode,o))}for(;t<y.length;t+=1)y[t].d(1);y.length=v.length}4096&r[0]&&g!==(g=String.fromCharCode("1".charCodeAt(0)+e[107])+"")&&k(f,g),2097152&r[0]&&m(i,"style",e[21])},d(e){e&&c(t),e&&c(r),a(y,e),e&&c(o),e&&c(i)}}}function Fe(e){let t,n,r=String.fromCharCode("A".charCodeAt(0)+e[104])+"";return{c(){t=u("div"),n=d(r),m(t,"class","coordinate"),m(t,"style",e[21])},m(e,r){l(e,t,r),s(t,n)},p(e,o){2048&o[0]&&r!==(r=String.fromCharCode("A".charCodeAt(0)+e[104])+"")&&k(n,r),2097152&o[0]&&m(t,"style",e[21])},d(e){e&&c(t)}}}function Ne(t){let n;return{c(){n=u("div")},m(e,t){l(e,n,t)},p:e,d(e){e&&c(n)}}}function je(e){let t;return{c(){t=u("chess-black-king"),v(t,"size",e[13]),v(t,"style",e[31]),v(t,"class","dndPiece")},m(e,n){l(e,t,n)},p(e,n){8192&n[0]&&v(t,"size",e[13]),1&n[1]&&v(t,"style",e[31])},d(e){e&&c(t)}}}function De(e){let t;return{c(){t=u("chess-black-queen"),v(t,"size",e[13]),v(t,"style",e[31]),v(t,"class","dndPiece")},m(e,n){l(e,t,n)},p(e,n){8192&n[0]&&v(t,"size",e[13]),1&n[1]&&v(t,"style",e[31])},d(e){e&&c(t)}}}function Oe(e){let t;return{c(){t=u("chess-black-rook"),v(t,"size",e[13]),v(t,"style",e[31]),v(t,"class","dndPiece")},m(e,n){l(e,t,n)},p(e,n){8192&n[0]&&v(t,"size",e[13]),1&n[1]&&v(t,"style",e[31])},d(e){e&&c(t)}}}function Be(e){let t;return{c(){t=u("chess-black-bishop"),v(t,"size",e[13]),v(t,"style",e[31]),v(t,"class","dndPiece")},m(e,n){l(e,t,n)},p(e,n){8192&n[0]&&v(t,"size",e[13]),1&n[1]&&v(t,"style",e[31])},d(e){e&&c(t)}}}function Ke(e){let t;return{c(){t=u("chess-black-knight"),v(t,"size",e[13]),v(t,"style",e[31]),v(t,"class","dndPiece")},m(e,n){l(e,t,n)},p(e,n){8192&n[0]&&v(t,"size",e[13]),1&n[1]&&v(t,"style",e[31])},d(e){e&&c(t)}}}function Qe(e){let t;return{c(){t=u("chess-black-pawn"),v(t,"size",e[13]),v(t,"style",e[31]),v(t,"class","dndPiece")},m(e,n){l(e,t,n)},p(e,n){8192&n[0]&&v(t,"size",e[13]),1&n[1]&&v(t,"style",e[31])},d(e){e&&c(t)}}}function Ue(e){let t;return{c(){t=u("chess-white-king"),v(t,"size",e[13]),v(t,"style",e[31]),v(t,"class","dndPiece")},m(e,n){l(e,t,n)},p(e,n){8192&n[0]&&v(t,"size",e[13]),1&n[1]&&v(t,"style",e[31])},d(e){e&&c(t)}}}function Ge(e){let t;return{c(){t=u("chess-white-queen"),v(t,"size",e[13]),v(t,"style",e[31]),v(t,"class","dndPiece")},m(e,n){l(e,t,n)},p(e,n){8192&n[0]&&v(t,"size",e[13]),1&n[1]&&v(t,"style",e[31])},d(e){e&&c(t)}}}function We(e){let t;return{c(){t=u("chess-white-rook"),v(t,"size",e[13]),v(t,"style",e[31]),v(t,"class","dndPiece")},m(e,n){l(e,t,n)},p(e,n){8192&n[0]&&v(t,"size",e[13]),1&n[1]&&v(t,"style",e[31])},d(e){e&&c(t)}}}function He(e){let t;return{c(){t=u("chess-white-bishop"),v(t,"size",e[13]),v(t,"style",e[31]),v(t,"class","dndPiece")},m(e,n){l(e,t,n)},p(e,n){8192&n[0]&&v(t,"size",e[13]),1&n[1]&&v(t,"style",e[31])},d(e){e&&c(t)}}}function Ze(e){let t;return{c(){t=u("chess-white-knight"),v(t,"size",e[13]),v(t,"style",e[31]),v(t,"class","dndPiece")},m(e,n){l(e,t,n)},p(e,n){8192&n[0]&&v(t,"size",e[13]),1&n[1]&&v(t,"style",e[31])},d(e){e&&c(t)}}}function Xe(e){let t;return{c(){t=u("chess-white-pawn"),v(t,"size",e[13]),v(t,"style",e[31]),v(t,"class","dndPiece")},m(e,n){l(e,t,n)},p(e,n){8192&n[0]&&v(t,"size",e[13]),1&n[1]&&v(t,"style",e[31])},d(e){e&&c(t)}}}function Ye(e){let t,n,r,o,i,a,f;function h(e,t){return(null==f||32&t[0])&&(f=!("w"!==e[5].turn())),f?Ve:Je}let g=h(e,[-1]),v=g(e);return{c(){t=u("div"),n=u("div"),r=u("div"),o=d(e[1]),i=p(),a=u("div"),v.c(),m(r,"class","promotion-title"),m(r,"style",e[29]),m(a,"class","promotion-buttons"),m(n,"class","promotion-layer"),m(n,"style",e[18]),m(t,"class","promotion-overlay-layer"),m(t,"style",e[17])},m(e,c){l(e,t,c),s(t,n),s(n,r),s(r,o),s(n,i),s(n,a),v.m(a,null)},p(e,i){2&i[0]&&k(o,e[1]),536870912&i[0]&&m(r,"style",e[29]),g===(g=h(e,i))&&v?v.p(e,i):(v.d(1),v=g(e),v&&(v.c(),v.m(a,null))),262144&i[0]&&m(n,"style",e[18]),131072&i[0]&&m(t,"style",e[17])},d(e){e&&c(t),v.d()}}}function Je(e){let t,n,o,i,s,a,f,d;return{c(){t=u("chess-black-queen"),n=p(),o=u("chess-black-rook"),i=p(),s=u("chess-black-bishop"),a=p(),f=u("chess-black-knight"),v(t,"style",e[30]),v(t,"size",e[13]),v(o,"style",e[30]),v(o,"size",e[13]),v(s,"style",e[30]),v(s,"size",e[13]),v(f,"style",e[30]),v(f,"size",e[13])},m(r,c){l(r,t,c),l(r,n,c),l(r,o,c),l(r,i,c),l(r,s,c),l(r,a,c),l(r,f,c),d=[h(t,"click",e[95]),h(o,"click",e[96]),h(s,"click",e[97]),h(f,"click",e[98])]},p(e,n){1073741824&n[0]&&v(t,"style",e[30]),8192&n[0]&&v(t,"size",e[13]),1073741824&n[0]&&v(o,"style",e[30]),8192&n[0]&&v(o,"size",e[13]),1073741824&n[0]&&v(s,"style",e[30]),8192&n[0]&&v(s,"size",e[13]),1073741824&n[0]&&v(f,"style",e[30]),8192&n[0]&&v(f,"size",e[13])},d(e){e&&c(t),e&&c(n),e&&c(o),e&&c(i),e&&c(s),e&&c(a),e&&c(f),r(d)}}}function Ve(e){let t,n,o,i,s,a,f,d;return{c(){t=u("chess-white-queen"),n=p(),o=u("chess-white-rook"),i=p(),s=u("chess-white-bishop"),a=p(),f=u("chess-white-knight"),v(t,"style",e[30]),v(t,"size",e[13]),v(o,"style",e[30]),v(o,"size",e[13]),v(s,"style",e[30]),v(s,"size",e[13]),v(f,"style",e[30]),v(f,"size",e[13])},m(r,c){l(r,t,c),l(r,n,c),l(r,o,c),l(r,i,c),l(r,s,c),l(r,a,c),l(r,f,c),d=[h(t,"click",e[91]),h(o,"click",e[92]),h(s,"click",e[93]),h(f,"click",e[94])]},p(e,n){1073741824&n[0]&&v(t,"style",e[30]),8192&n[0]&&v(t,"size",e[13]),1073741824&n[0]&&v(o,"style",e[30]),8192&n[0]&&v(o,"size",e[13]),1073741824&n[0]&&v(s,"style",e[30]),8192&n[0]&&v(s,"size",e[13]),1073741824&n[0]&&v(f,"style",e[30]),8192&n[0]&&v(f,"size",e[13])},d(e){e&&c(t),e&&c(n),e&&c(o),e&&c(i),e&&c(s),e&&c(a),e&&c(f),r(d)}}}function et(t){let n,o,i,f,d,v,k,y,$,w,b,_,C,z,x,L,E,A,M,P,S,R,I,T,q,F,N,j,D,O,B,K,Q,U,G,W,H,Z,X=t[11],Y=[];for(let e=0;e<X.length;e+=1)Y[e]=$e(ye(t,X,e));let J=t[12],V=[];for(let e=0;e<J.length;e+=1)V[e]=qe(ke(t,J,e));let ee=t[11],te=[];for(let e=0;e<ee.length;e+=1)te[e]=Fe(me(t,ee,e));function ne(e,t){var n;return(null==L||256&t[0])&&(n=e[8],L=!([void 0,null].includes(n)||"p"!==n.type||"w"!==n.color)),L?Xe:((null==E||256&t[0])&&(E=!!function(e){return![void 0,null].includes(e)&&("n"===e.type&&"w"===e.color)}(e[8])),E?Ze:((null==A||256&t[0])&&(A=!!function(e){return![void 0,null].includes(e)&&("b"===e.type&&"w"===e.color)}(e[8])),A?He:((null==M||256&t[0])&&(M=!!function(e){return![void 0,null].includes(e)&&("r"===e.type&&"w"===e.color)}(e[8])),M?We:((null==P||256&t[0])&&(P=!!function(e){return![void 0,null].includes(e)&&("q"===e.type&&"w"===e.color)}(e[8])),P?Ge:((null==S||256&t[0])&&(S=!!function(e){return![void 0,null].includes(e)&&("k"===e.type&&"w"===e.color)}(e[8])),S?Ue:((null==R||256&t[0])&&(R=!!function(e){return![void 0,null].includes(e)&&("p"===e.type&&"b"===e.color)}(e[8])),R?Qe:((null==I||256&t[0])&&(I=!!function(e){return![void 0,null].includes(e)&&("n"===e.type&&"b"===e.color)}(e[8])),I?Ke:((null==T||256&t[0])&&(T=!!function(e){return![void 0,null].includes(e)&&("b"===e.type&&"b"===e.color)}(e[8])),T?Be:((null==q||256&t[0])&&(q=!!function(e){return![void 0,null].includes(e)&&("r"===e.type&&"b"===e.color)}(e[8])),q?Oe:((null==F||256&t[0])&&(F=!!function(e){return![void 0,null].includes(e)&&("q"===e.type&&"b"===e.color)}(e[8])),F?De:((null==N||256&t[0])&&(N=!!function(e){return![void 0,null].includes(e)&&("k"===e.type&&"b"===e.color)}(e[8])),N?je:Ne)))))))))))}let re=ne(t,[-1]),oe=re(t),ie=!0===t[6]&&Ye(t);return{c(){n=u("div"),o=u("div"),i=u("div"),f=p();for(let e=0;e<Y.length;e+=1)Y[e].c();d=p(),v=u("div"),k=p();for(let e=0;e<V.length;e+=1)V[e].c();y=p(),$=u("div"),w=p();for(let e=0;e<te.length;e+=1)te[e].c();b=p(),_=u("div"),z=p(),x=u("div"),oe.c(),j=p(),D=u("div"),O=u("div"),B=p(),K=u("div"),Q=p(),U=u("div"),G=p(),W=u("div"),H=p(),ie&&ie.c(),this.c=e,m(_,"class",C="player-turn "+("w"===t[5].turn()?"white-turn":"black-turn")),m(o,"class","lowest-layer"),m(o,"style",t[15]),m(x,"class","dnd-layer"),m(O,"class","last-move-line"),m(O,"style",t[25]),m(K,"class","last-move-line"),m(K,"style",t[26]),m(U,"class","last-move-line"),m(U,"style",t[27]),m(W,"class","last-move-line"),m(W,"style",t[28]),m(D,"class","last-move-layer"),m(D,"style",t[16]),m(n,"class","root"),m(n,"style",t[14])},m(e,r){l(e,n,r),s(n,o),s(o,i),s(o,f);for(let e=0;e<Y.length;e+=1)Y[e].m(o,null);s(o,d),s(o,v),s(o,k);for(let e=0;e<V.length;e+=1)V[e].m(o,null);s(o,y),s(o,$),s(o,w);for(let e=0;e<te.length;e+=1)te[e].m(o,null);s(o,b),s(o,_),s(n,z),s(n,x),oe.m(x,null),s(n,j),s(n,D),s(D,O),s(D,B),s(D,K),s(D,Q),s(D,U),s(D,G),s(D,W),s(n,H),ie&&ie.m(n,null),t[99](n),Z=[h(n,"mousedown",g(t[100])),h(n,"mousemove",g(t[101])),h(n,"mouseup",g(t[102])),h(n,"mouseleave",g(t[103]))]},p(e,t){if(2099200&t[0]){let n;for(X=e[11],n=0;n<X.length;n+=1){const r=ye(e,X,n);Y[n]?Y[n].p(r,t):(Y[n]=$e(r),Y[n].c(),Y[n].m(o,d))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=X.length}if(33046304&t[0]){let n;for(J=e[12],n=0;n<J.length;n+=1){const r=ke(e,J,n);V[n]?V[n].p(r,t):(V[n]=qe(r),V[n].c(),V[n].m(o,y))}for(;n<V.length;n+=1)V[n].d(1);V.length=J.length}if(2099200&t[0]){let n;for(ee=e[11],n=0;n<ee.length;n+=1){const r=me(e,ee,n);te[n]?te[n].p(r,t):(te[n]=Fe(r),te[n].c(),te[n].m(o,b))}for(;n<te.length;n+=1)te[n].d(1);te.length=ee.length}32&t[0]&&C!==(C="player-turn "+("w"===e[5].turn()?"white-turn":"black-turn"))&&m(_,"class",C),32768&t[0]&&m(o,"style",e[15]),re===(re=ne(e,t))&&oe?oe.p(e,t):(oe.d(1),oe=re(e),oe&&(oe.c(),oe.m(x,null))),33554432&t[0]&&m(O,"style",e[25]),67108864&t[0]&&m(K,"style",e[26]),134217728&t[0]&&m(U,"style",e[27]),268435456&t[0]&&m(W,"style",e[28]),65536&t[0]&&m(D,"style",e[16]),!0===e[6]?ie?ie.p(e,t):(ie=Ye(e),ie.c(),ie.m(n,null)):ie&&(ie.d(1),ie=null),16384&t[0]&&m(n,"style",e[14])},i:e,o:e,d(e){e&&c(n),a(Y,e),a(V,e),a(te,e),oe.d(),ie&&ie.d(),t[99](null),r(Z)}}}function tt(e,t,n){const r=b(),o=_(),i=(e,t)=>{o(e,t),r.dispatchEvent&&r.dispatchEvent(new CustomEvent(e,{detail:t}))};let s,l,c,a,u,f,d,p,h,g,m,v,k,y,$,w,C,x,L,E,A,M,P,S,R,I,T,q,F,N,j,D=!1,O=!1,{size:B=100}=t,{background:K="#124589"}=t,{reversed:Q=!1}=t,{white_cell_color:U="GoldenRod"}=t,{black_cell_color:G="brown"}=t,{coordinates_color:W="DarkOrange"}=t,{origin_cell_color:H="crimson"}=t,{target_cell_color:Z="ForestGreen"}=t,{dnd_cross_color:X="DimGrey"}=t,{move_highlight_color:Y="CadetBlue"}=t,{promotion_dialog_title:J="Select the promotion piece"}=t,{white_player_human:V="true"}=t,{black_player_human:ee="true"}=t,te=new de("8/8/8/8/8/8/8/8 w - - 0 1"),ne=!1,re=void 0;function oe(){n(7,T=!1),n(8,q=void 0),n(84,j=void 0),n(9,F=void 0),n(10,N=void 0)}function ie(){if(!D)return;const e="w"===te.turn();n(4,O=e&&![!0,"true"].includes(V)||!e&&![!0,"true"].includes(ee)),O&&i("waiting_manual_move")}function se({startFile:e,startRank:t,endFile:r,endRank:o}){n(6,ne=!0),re={startFile:e,startRank:t,endFile:r,endRank:o}}function le(e){const t={from:ae(re.startFile,re.startRank),to:ae(re.endFile,re.endRank),promotion:e},r=new de(te.fen());te.move(t),n(5,te),oe(),ve({...re,logicBeforeMove:r,logicAfterMove:te}),re=void 0,n(6,ne=!1),ke(),ie()}function ce(){n(5,te)}function fe({x:e,y:t,file:r,rank:o,piece:i}){n(84,j={x:e,y:t}),n(8,q={...i,originCell:{file:r,rank:o}}),n(9,F=r),n(10,N=o),n(7,T=!0)}function me(e,t,r,o){n(84,j={x:e,y:t}),n(9,F=r),n(10,N=o)}function ve({logicBeforeMove:e,logicAfterMove:t,startFile:r,startRank:o,endFile:s,endRank:c}){n(58,l={start:{file:r,rank:o},end:{file:s,rank:c}});const a=e.fen().split(" ")[5],u=t.history(),f="w"===e.turn(),d=u[u.length-1],p=function({moveSan:e,whiteTurn:t}){return e=(e=(e=(e=(e=e.replace(/K/g,t?"":"").normalize("NFKC")).replace(/Q/g,t?"":"").normalize("NFKC")).replace(/R/g,t?"":"").normalize("NFKC")).replace(/B/g,t?"":"").normalize("NFKC")).replace(/N/g,t?"":"").normalize("NFKC")}({moveSan:d,whiteTurn:f}),h={moveNumber:a,whiteTurn:f,moveSan:d,moveFan:p,positionFen:t.fen(),fromFileIndex:r,fromRankIndex:o,toFileIndex:s,toRankIndex:c};i("move_done",{moveObject:h})}function ke(){te.in_checkmate()?(oe(),n(3,D=!1),i("checkmate",{whiteTurnBeforeMove:"w"!==te.turn()})):te.in_stalemate()?(oe(),n(3,D=!1),i("stalemate")):te.in_threefold_repetition()?(oe(),n(3,D=!1),i("perpetual_draw")):te.in_draw()&&(te.insufficient_material()?(oe(),n(3,D=!1),i("missing_material_draw")):(oe(),n(3,D=!1),i("fifty_moves_draw")))}let ye,$e,we,be,_e,Ce,ze,xe,Le,Ee,Ae,Me,Pe,Se,Re,Ie,Te,qe,Fe,Ne,je,De,Oe,Be;return e.$set=e=>{"size"in e&&n(41,B=e.size),"background"in e&&n(42,K=e.background),"reversed"in e&&n(0,Q=e.reversed),"white_cell_color"in e&&n(43,U=e.white_cell_color),"black_cell_color"in e&&n(44,G=e.black_cell_color),"coordinates_color"in e&&n(45,W=e.coordinates_color),"origin_cell_color"in e&&n(46,H=e.origin_cell_color),"target_cell_color"in e&&n(47,Z=e.target_cell_color),"dnd_cross_color"in e&&n(48,X=e.dnd_cross_color),"move_highlight_color"in e&&n(49,Y=e.move_highlight_color),"promotion_dialog_title"in e&&n(1,J=e.promotion_dialog_title),"white_player_human"in e&&n(50,V=e.white_player_human),"black_player_human"in e&&n(51,ee=e.black_player_human)},e.$$.update=()=>{if(1&e.$$.dirty[0]&&n(11,ye=[!0,"true"].includes(Q)?[7,6,5,4,3,2,1,0]:[0,1,2,3,4,5,6,7]),1&e.$$.dirty[0]&&n(12,$e=[!0,"true"].includes(Q)?[0,1,2,3,4,5,6,7]:[7,6,5,4,3,2,1,0]),1024&e.$$.dirty[1]&&n(13,we=B/9),8192&e.$$.dirty[0]&&n(85,be=.5*we),3072&e.$$.dirty[1]&&n(14,_e=`\n    width: ${B}px;\n    height: ${B}px;\n    background-color: ${K};\n`),8192&e.$$.dirty[0]|8388608&e.$$.dirty[2]&&n(86,Ce=`${be}px repeat(8, ${we}px) ${be}px / ${be}px repeat(8, ${we}px) ${be}px`),1024&e.$$.dirty[1]|16777216&e.$$.dirty[2]&&n(15,ze=`\n    width: ${B}px;\n    height: ${B}px;\n    grid-template: ${Ce};\n`),1024&e.$$.dirty[1]&&n(16,xe=`\n    width: ${B}px;\n    height: ${B}px;\n`),1024&e.$$.dirty[1]&&n(17,Le=`\n    width: ${B}px;\n    height: ${B}px;\n`),1024&e.$$.dirty[1]&&n(18,Ee=`\n    width: ${.8*B}px;\n    height: ${.6*B}px;\n`),4096&e.$$.dirty[1]&&n(19,Ae=`\n    background-color: ${U};\n`),8192&e.$$.dirty[1]&&n(20,Me=`\n    background-color: ${G};\n`),8192&e.$$.dirty[0]|16384&e.$$.dirty[1]&&n(21,Pe=`\n    font-size: ${.3*we}px;\n    font-weight: bold;\n    color: ${W};\n`),8192&e.$$.dirty[0]|32768&e.$$.dirty[1]&&n(22,Se=`\n    background-color: ${H};\n    width: ${we}px;\n    height: ${we}px;\n`),8192&e.$$.dirty[0]|65536&e.$$.dirty[1]&&n(23,Re=`\n    background-color: ${Z};\n    width: ${we}px;\n    height: ${we}px;\n`),8192&e.$$.dirty[0]|131072&e.$$.dirty[1]&&n(24,Ie=`\n    background-color: ${X};\n    width: ${we}px;\n    height: ${we}px;\n`),8192&e.$$.dirty[0]&&n(87,je=.08*we),8193&e.$$.dirty[0]|134217728&e.$$.dirty[1]|33554432&e.$$.dirty[2])if([null,void 0].includes(l))n(59,c=void 0),n(60,a=void 0),n(61,u=void 0),n(62,f=void 0),n(63,d=void 0),n(64,p=void 0),n(65,h=void 0),n(66,g=void 0),n(67,m=void 0),n(68,v=void 0),n(69,k=void 0),n(70,y=void 0),n(71,$=void 0),n(72,w=void 0),n(73,C=void 0),n(74,x=void 0),n(75,L=void 0),n(76,E=void 0),n(77,A=void 0),n(78,M=void 0),n(79,P=void 0),n(80,S=void 0),n(81,R=void 0),n(82,I=void 0);else{const e=["true",!0].includes(Q)?7-l.start.file:l.start.file,t=["true",!0].includes(Q)?l.start.rank:7-l.start.rank,r=["true",!0].includes(Q)?7-l.end.file:l.end.file,o=["true",!0].includes(Q)?l.end.rank:7-l.end.rank,i=we*(e+1)-je,s=we*(t+1),b=we*(r+1)-je,_=we*(o+1),z=b-i,T=_-s,q=Math.atan2(T,z)-Math.PI/2,F=Math.sqrt(z*z+T*T);n(59,c=i),n(60,a=s),n(61,u=2*je),n(62,f=F),n(63,d=`rotate(${q}rad)`),n(64,p=`${je}px 0px`);const N=Math.atan2(T,z)-Math.PI/2-3*Math.PI/4,j=.4*Math.sqrt(z*z+T*T);n(65,h=b),n(66,g=_),n(67,m=2*je),n(68,v=j),n(69,k=`rotate(${N}rad)`),n(70,y=`${je}px 0px`);const D=Math.atan2(T,z)-Math.PI/2+3*Math.PI/4,O=.4*Math.sqrt(z*z+T*T);n(71,$=b),n(72,w=_),n(73,C=2*je),n(74,x=O),n(75,L=`rotate(${D}rad)`),n(76,E=`${je}px 0px`);const B=Math.atan2(T,z)+Math.PI/4,K=2*je;n(77,A=b),n(78,M=_),n(79,P=2*je),n(80,S=K),n(81,R=`rotate(${B}rad)`),n(82,I="center")}1879310336&e.$$.dirty[1]|7&e.$$.dirty[2]&&n(25,Te=`\n    left: ${c||0}px;\n    top: ${a||0}px;\n    width: ${u||0}px;\n    height: ${f||0}px;\n    transform: ${d||""};\n    -ms-transform: ${d||""};\n    -moz-transform: ${d||""};\n    -webkit-transform: ${d||""};\n    transform-origin: ${p||"0px 0px"}; \n    -ms-transform-origin: ${p||"0px 0px"};\n    -moz-transform-origin: ${p||"0px 0px"}; \n    -webkit-transform-origin: ${p||"0px 0px"};\n    background-color: ${Y};\n`),262144&e.$$.dirty[1]|504&e.$$.dirty[2]&&n(26,qe=`\n    left: ${h||0}px;\n    top: ${g||0}px;\n    width: ${m||0}px;\n    height: ${v||0}px;\n    transform: ${k||""};\n    -ms-transform: ${k||""};\n    -moz-transform: ${k||""};\n    -webkit-transform: ${k||""};\n    transform-origin: ${y||"0px 0px"}; \n    -ms-transform-origin: ${y||"0px 0px"};\n    -moz-transform-origin: ${y||"0px 0px"}; \n    -webkit-transform-origin: ${y||"0px 0px"};\n    background-color: ${Y};\n`),262144&e.$$.dirty[1]|32256&e.$$.dirty[2]&&n(27,Fe=`\n    left: ${$||0}px;\n    top: ${w||0}px;\n    width: ${C||0}px;\n    height: ${x||0}px;\n    transform: ${L||""};\n    -ms-transform: ${L||""};\n    -moz-transform: ${L||""};\n    -webkit-transform: ${L||""};\n    transform-origin: ${E||"0px 0px"}; \n    -ms-transform-origin: ${E||"0px 0px"};\n    -moz-transform-origin: ${E||"0px 0px"}; \n    -webkit-transform-origin: ${E||"0px 0px"};\n    background-color: ${Y};\n`),262144&e.$$.dirty[1]|2064384&e.$$.dirty[2]&&n(28,Ne=`\n    left: ${A||0}px;\n    top: ${M||0}px;\n    width: ${P||0}px;\n    height: ${S||0}px;\n    transform: ${R||""};\n    -ms-transform: ${R||""};\n    -moz-transform: ${R||""};\n    -webkit-transform: ${R||""};\n    transform-origin: ${I||"0px 0px"}; \n    -ms-transform-origin: ${I||"0px 0px"};\n    -moz-transform-origin: ${I||"0px 0px"}; \n    -webkit-transform-origin: ${I||"0px 0px"};\n    background-color: ${Y};\n`),8192&e.$$.dirty[0]&&n(29,De=`\n    margin: ${.4*we}px;\n    font-size: ${.5*we}px;\n`),8192&e.$$.dirty[0]&&n(30,Oe=`\n    border: ${.08*we}px solid black;\n    padding: ${.01*we}px;\n    margin: ${.2*we}px;\n`),4194304&e.$$.dirty[2]&&n(31,Be=[null,void 0].includes(j)?"":`\n    position: absolute;\n    left: ${j.x}px;\n    top: ${j.y}px;\n`)},[Q,J,s,D,O,te,ne,T,q,F,N,ye,$e,we,_e,ze,xe,Le,Ee,Ae,Me,Pe,Se,Re,Ie,Te,qe,Fe,Ne,De,Oe,Be,oe,ie,se,le,ce,fe,me,ve,ke,B,K,U,G,W,H,Z,X,Y,V,ee,function(e="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"){n(5,te=new de(e)),n(58,l=void 0),n(6,ne=!1),oe(),ie(),n(3,D=!0)},function(){n(0,Q=!Q)},function(){return"w"===te.turn()},function(){return te.fen()},function({startFile:e,startRank:t,endFile:r,endRank:o,promotion:i="q"}){if(!D)return;if(!O)return;const s={from:ae(e,t),to:ae(r,o),promotion:i},l=new de(te.fen());te.move(s)&&(n(5,te),ve({startFile:e,startRank:t,endFile:r,endRank:o,logicBeforeMove:l,logicAfterMove:te}),ke(),ie())},function({positionFen:e,fromFileIndex:t,fromRankIndex:r,toFileIndex:o,toRankIndex:i}){D||(n(5,te=new de(e)),n(58,l={start:{file:t,rank:r},end:{file:o,rank:i}}))},l,c,a,u,f,d,p,h,g,m,v,k,y,$,w,C,x,L,E,A,M,P,S,R,I,re,j,be,Ce,je,r,o,i,()=>le("q"),()=>le("r"),()=>le("b"),()=>le("n"),()=>le("q"),()=>le("r"),()=>le("b"),()=>le("n"),function(e){z[e?"unshift":"push"](()=>{n(2,s=e)})},e=>function({event:e,cellsSize:t,reversed:n,rootElement:r,logic:o,setupDnd:i,gameInProgress:s,waitingForExternalMove:l}){if(!s)return;if(l)return;const[c,a]=he(e,r),[u,f]=pe({x:c,y:a,cellsSize:t,reversed:n}),d=ue(o,u,f);[null,void 0].includes(d)||i({x:c,y:a,file:u,rank:f,piece:d})}({event:e,cellsSize:we,reversed:Q,rootElement:s,logic:te,dragAndDropInProgress:T,setupDnd:fe,gameInProgress:D,waitingForExternalMove:O}),e=>function({event:e,dragAndDropInProgress:t,updateDndLocation:n,rootElement:r,cancelDnd:o,cellsSize:i,reversed:s,promotionPending:l,gameInProgress:c,waitingForExternalMove:a}){if(!c)return;if(a)return;if(!t)return;if(l)return;const[u,f]=he(e,r),[d,p]=pe({x:u,y:f,cellsSize:i,reversed:s}),h=r.getBoundingClientRect();u>=0&&u<=h.width&&f>=0&&f<=h.height?n(u,f,d,p):o()}({event:e,dragAndDropInProgress:T,updateDndLocation:me,rootElement:s,cancelDnd:oe,cellsSize:we,reversed:Q,promotionPending:ne,gameInProgress:D,waitingForExternalMove:O}),e=>function({event:e,cellsSize:t,reversed:n,rootElement:r,logic:o,dragAndDropInProgress:i,dndPieceData:s,cancelDnd:l,updateLogic:c,updateAndEmitLastMove:a,promotionPending:u,setPromotionPending:f,gameInProgress:d,handleGameEndedStatus:p,updateWaitingForExternalMove:h,waitingForExternalMove:g}){if(!d)return;if(g)return;if(!i)return;if(u)return;const[m,v]=he(e,r),[k,y]=pe({x:m,y:v,cellsSize:t,reversed:n}),$=s.originCell;if(!($.file>=0&&$.file<=7&&$.rank>=0&&$.rank<=7&&k>=0&&k<=7&&y>=0&&y<=7))return void l();const w=ge({startFile:$.file,startRank:$.rank,endFile:k,endRank:y}),b=new de(o.fen()).move(w),_=![null,void 0].includes(b),C=o.get(ae($.file,$.rank)),z=C&&"p"===C.type;if(_&&z&&(0===y||7===y))return void f({startFile:$.file,startRank:$.rank,endFile:k,endRank:y});const x=ge({startFile:$.file,startRank:$.rank,endFile:k,endRank:y}),L=new de(o.fen()),E=o.move(x);[null,void 0].includes(E)?l():(c(),a({startFile:$.file,startRank:$.rank,endFile:k,endRank:y,logicBeforeMove:L,logicAfterMove:o}),l(),p(),h())}({event:e,cellsSize:we,reversed:Q,rootElement:s,logic:te,dragAndDropInProgress:T,dndPieceData:q,cancelDnd:oe,updateLogic:ce,updateAndEmitLastMove:ve,promotionPending:ne,setPromotionPending:se,gameInProgress:D,handleGameEndedStatus:ke,updateWaitingForExternalMove:ie,waitingForExternalMove:O}),e=>function({event:e,cancelDnd:t,promotionPending:n,gameInProgress:r,waitingForExternalMove:o}){r&&(o||n||t())}({event:e,cancelDnd:oe,promotionPending:ne,gameInProgress:D,waitingForExternalMove:O})]}class nt extends N{constructor(e){super(),this.shadowRoot.innerHTML="<style>.root{position:relative}.lowest-layer{position:absolute;display:grid;z-index:2}.last-move-layer{position:absolute;z-index:3}.dnd-layer{position:absolute;z-index:4}.promotion-overlay-layer{position:absolute;z-index:5;opacity:0.8;display:flex;justify-content:center;align-items:center;background-color:black}.promotion-layer{position:absolute;background-color:white;display:flex;flex-direction:column;justify-content:center;align-items:center}.promotion-title{font-weight:bold;color:black}.promotion-buttons{display:flex;justify-content:center;align-items:center}.cell{display:flex;justify-content:center;align-items:center}.coordinate{display:flex;justify-content:center;align-items:center}.dndPiece{position:absolute}.last-move-line{position:absolute}.player-turn{border-radius:50%}.white-turn{background-color:white}.black-turn{background-color:black}</style>",F(this,{target:this.shadowRoot},tt,et,i,{size:41,background:42,reversed:0,white_cell_color:43,black_cell_color:44,coordinates_color:45,origin_cell_color:46,target_cell_color:47,dnd_cross_color:48,move_highlight_color:49,promotion_dialog_title:1,white_player_human:50,black_player_human:51,newGame:52,toggleSide:53,isWhiteTurn:54,getCurrentPosition:55,playMove:56,setPositionAndLastMove:57},[-1,-1,-1,-1]),e&&(e.target&&l(e.target,this,e.anchor),e.props&&(this.$set(e.props),R()))}static get observedAttributes(){return["size","background","reversed","white_cell_color","black_cell_color","coordinates_color","origin_cell_color","target_cell_color","dnd_cross_color","move_highlight_color","promotion_dialog_title","white_player_human","black_player_human","newGame","toggleSide","isWhiteTurn","getCurrentPosition","playMove","setPositionAndLastMove"]}get size(){return this.$$.ctx[41]}set size(e){this.$set({size:e}),R()}get background(){return this.$$.ctx[42]}set background(e){this.$set({background:e}),R()}get reversed(){return this.$$.ctx[0]}set reversed(e){this.$set({reversed:e}),R()}get white_cell_color(){return this.$$.ctx[43]}set white_cell_color(e){this.$set({white_cell_color:e}),R()}get black_cell_color(){return this.$$.ctx[44]}set black_cell_color(e){this.$set({black_cell_color:e}),R()}get coordinates_color(){return this.$$.ctx[45]}set coordinates_color(e){this.$set({coordinates_color:e}),R()}get origin_cell_color(){return this.$$.ctx[46]}set origin_cell_color(e){this.$set({origin_cell_color:e}),R()}get target_cell_color(){return this.$$.ctx[47]}set target_cell_color(e){this.$set({target_cell_color:e}),R()}get dnd_cross_color(){return this.$$.ctx[48]}set dnd_cross_color(e){this.$set({dnd_cross_color:e}),R()}get move_highlight_color(){return this.$$.ctx[49]}set move_highlight_color(e){this.$set({move_highlight_color:e}),R()}get promotion_dialog_title(){return this.$$.ctx[1]}set promotion_dialog_title(e){this.$set({promotion_dialog_title:e}),R()}get white_player_human(){return this.$$.ctx[50]}set white_player_human(e){this.$set({white_player_human:e}),R()}get black_player_human(){return this.$$.ctx[51]}set black_player_human(e){this.$set({black_player_human:e}),R()}get newGame(){return this.$$.ctx[52]}get toggleSide(){return this.$$.ctx[53]}get isWhiteTurn(){return this.$$.ctx[54]}get getCurrentPosition(){return this.$$.ctx[55]}get playMove(){return this.$$.ctx[56]}get setPositionAndLastMove(){return this.$$.ctx[57]}}customElements.define("loloof64-chessboard",nt);export default nt;
